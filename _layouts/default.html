<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
  <script>document.documentElement.classList.replace('no-js','js');</script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ page.title | default: site.title | default: "Golden Trowel Project" }}</title>
  <link rel="canonical" href="{{ page.url | absolute_url }}">

  <style>
    /* ============== Design Tokens ============== */
    :root{
      --soil:#3B2A1F;
      --offwhite:#FAF7F2;
      --moss:#6B8D6A;
      --gold:#fac441;
      --logo-orange:#8a340a;
      --accent:#6B8D6A;
      --ink:#111;
      --maxw:1100px;

      /* Waves + band */
      --wave-mid:#c9beb7;
      --wave-dark:#baafa8;
      --band-grad-top:#baafa8;
      --band-grad-mid:#cfc4bd;
      --band-grad-bottom:#f7f5f2;
    }

    /* ============== Base / Layout ============== */
    *,*::before,*::after{ box-sizing: border-box; }
    html,body{ height:100%; }
    body{
      margin:0; color:var(--ink);
      font-family: Calibri, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: linear-gradient(to bottom, #eae6df 0%, #f5f2ee 55%, #ffffff 100%);
      background-attachment: fixed;
    }
    main{ width:min(100%, var(--maxw)); margin-inline:auto; padding:clamp(16px,4vw,28px); }
    img,svg,video{ max-width:100%; height:auto; display:block; }
    a{ color:var(--soil); text-decoration-thickness:.08em; text-underline-offset:.18em; }
    a:hover{ color:var(--logo-orange); }
    h2{ color:var(--accent); font-size:clamp(1.2rem,3.4vw,1.6rem); margin:1.2em 0 .6em; }
    p{ font-size:clamp(1rem,2.4vw,1.125rem); line-height:1.6; margin:.6em 0; }

    /* ============== Header + Hero ============== */
    header.hero{
      position:relative; color:#fff;
      padding: clamp(0.6em, 2.4vw, 1.2em) 0 0;
      overflow:visible;
    }
    header.hero::before{
      content:""; position:absolute; inset:0; z-index:-1;
      background:
        linear-gradient(rgba(99,55,71, var(--hero-tint, .55)),
                        rgba(99,55,71, var(--hero-tint, .55))),
        var(--hero-url) no-repeat;
      background-position: var(--hero-pos, center 40%);
      background-size: cover;
      opacity: var(--hero-opacity, 1);
    }

    .header-content{
      display:flex; align-items:center; justify-content:center; gap:clamp(.6rem,2vw,1.2rem);
      max-width:var(--maxw); margin:0 auto; padding:0 clamp(16px,2vw,24px);
      text-shadow:0 2px 10px rgba(0,0,0,.35);
    }
    .header-content img{ width: clamp(150px, 11vw, 190px); border-radius:12px; }
    .header-text h1{
      color:#fff; margin:.1em 0;
      font-size: clamp(2.2rem, 6.2vw, 3.2rem);
      line-height:1.12;
    }
    /* stronger legibility over the photo */
.header-text p{
  margin:.35em 0 0;
  color: var(--logo-orange);
  font-weight:700;
  font-size: clamp(1.05rem, 2.6vw, 1.25rem);
  text-shadow:
    0 1px 0 rgba(255,255,255,.85),
    0 0 8px rgba(255,255,255,.45),
    0 0 14px rgba(255,255,255,.25);
}


    /* ============== Crest waves above the band ============== */
    .hero-wave{ position:relative; }
 /* 1) Nudge the crest tighter to the band (kill the gap) */
.hero-wave svg{ margin-bottom:-6px; }          /* was -2px */
.nav-gradient{
  margin-top:-18px;                             /* tuck further under the crest */
  padding-top: 0;                               /* no extra air above circles */
  padding-bottom: clamp(4px, .8vw, 10px);       /* a little air below */
  min-height: clamp(80px, 10vw, 120px);         /* slimmer band */
  overflow: visible;                             /* allow pills to overflow */
}

/* 2) Let the nav scroll horizontally BUT allow vertical overflow for pills */
.wave-nav{
  overflow-x:auto;
  overflow-y:visible;                            /* pills can spill over the band */
  -webkit-overflow-scrolling:touch;
}

/* 3) Make sure pills render on top of the body text */
.circle-nav{ z-index: 5; }
.flyout{ z-index: 10; }

/* (optional) keep circles a touch closer to the crest on the slimmer band */
 
    .wave-nav::-webkit-scrollbar{ display:none; height:0; } /* WebKit */

    .wave-track{ position:relative; height:100%; min-width:1100px; }
    .wave{ width:100%; height:100%; display:block; }

    /* Circles layer */
    .circle-nav{ position:absolute; inset:0; pointer-events:none; }
  /* Circles layer (unchanged sizing) */
.circle{ position:absolute; pointer-events:auto; --size: clamp(80px, 9.25vw, 112px);
         width: var(--size); height: var(--size); }

/* Button uses root colors */
.circle-btn{
  position:absolute; inset:0; border-radius:50%; border:3px solid var(--gold);
  display:flex; align-items:center; justify-content:center; text-align:center;
  padding:6px; line-height:1.1; font-weight:800; cursor:pointer;
  font-size:clamp(.9rem, 1.1vw, 1rem);
  background: var(--gold); color: var(--soil);
  box-shadow: 0 10px 0 rgba(0,0,0,.10), 0 2px 8px rgba(0,0,0,.08);
  transition: transform .15s ease, background .15s ease, color .15s ease,
              box-shadow .15s ease, border-color .15s ease;
  z-index:1;
}
.circle-btn:hover,
.circle-btn:focus-visible{
  background: var(--logo-orange); color:#fff; border-color: var(--gold); outline:0;
  transform: translateY(-2px);
  box-shadow: 0 12px 0 rgba(0,0,0,.12), 0 6px 14px rgba(0,0,0,.12);
}

/* Pills BELOW each circle (CSS-only positioning) */
.flyout{
  position:absolute; left:50%; top: calc(100% + 10px); transform: translateX(-50%);
  display:flex; flex-direction:column; align-items:center; gap:8px;
  pointer-events:none; opacity:0; transition:opacity .18s ease; z-index:2;
}
.circle:hover .flyout, .circle:focus-within .flyout{ opacity:1; pointer-events:auto; }

.pill{
  position:static;               /* no absolute math */
  background: var(--gold); color: var(--soil);
  font-weight:700; font-size:.9rem; white-space:nowrap;
  padding:.45em .9em; border-radius:999px; text-decoration:none;
  box-shadow:0 10px 20px rgba(0,0,0,.18);
  transition:transform .15s ease, background .15s ease, color .15s ease, box-shadow .15s ease;
}
.pill:hover, .pill:focus-visible{
  background: var(--logo-orange); color:#fff; transform:translateY(-1px);
  box-shadow:0 12px 24px rgba(0,0,0,.22); outline:0;
}

    /* (Optional) hub styles kept */
    .hub{ display:grid; gap:1.2rem; grid-template-columns: repeat(auto-fit, minmax(240px,1fr)); align-items:start; margin:clamp(12px,2vw,20px) auto; }
    .hub-group{ background: color-mix(in srgb, var(--offwhite) 92%, white); border:1px solid color-mix(in srgb, var(--soil) 18%, transparent); border-radius:16px; padding:.9rem; box-shadow:0 2px 6px rgba(0,0,0,.05); }
    .bubble{ width:100%; border-radius:999px; padding:.8rem 1rem; font-weight:800; background:var(--offwhite); color:var(--soil); border:2px solid color-mix(in srgb, var(--soil) 25%, transparent); transition:background .18s ease, color .18s ease, transform .18s ease, border-color .18s ease; min-height:44px; }
    .bubble:hover{ background:var(--logo-orange); color:#fff; transform:translateY(-2px); }
    .bubble:focus-visible{ outline:3px solid var(--accent); outline-offset:3px; }
  </style>
</head>

<body>
  <!-- Header + hero -->
  <header class="hero"
    style="
      --hero-url: url('{{ page.hero | default: '/assets/img/placeholder-header.jpg' | relative_url }}');
      --hero-pos: {{ page.hero_pos | default: 'center 40%' }};
      --hero-opacity: {{ page.hero_opacity | default: 1 }};
      --hero-tint: {{ page.hero_tint | default: .55 }};
    ">
    <div class="header-content">
      <img
        src="{{ '/assets/img/IMG_3241.PNG' | absolute_url }}?v={{ site.time | date: '%s' }}"
        alt="Logo for the Golden Trowel Project."
        loading="lazy" decoding="async" fetchpriority="low">
      <div class="header-text">
        <h1>Recognizing power. Reclaiming safety.</h1>
        <p>Practical tools. Powerful boundaries. Safer fieldwork.</p>
      </div>
    </div>

    <!-- Crest waves (static) -->
    <div class="hero-wave" aria-hidden="true" role="presentation">
      <svg viewBox="0 0 1440 160" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M0,64 C160,120 320,8 480,48 C640,88 800,168 960,128 C1120,88 1280,16 1440,64 L1440,160 L0,160 Z"
              fill="{{ '#c9beb7' }}"></path>
        <path d="M0,100 C160,140 320,40 480,70 C640,100 800,160 960,120 C1120,80 1280,30 1440,70 L1440,160 L0,160 Z"
              fill="{{ '#baafa8' }}"></path>
      </svg>

      <!-- Gradient band that holds the scrollable nav -->
      <div class="nav-gradient">
        <section class="wave-nav" aria-label="Primary navigation">
          <div class="wave-track">
            <!-- The JS will draw a subtle wave here (fill blends with band) -->
            <svg class="wave" preserveAspectRatio="none" aria-hidden="true"></svg>

            <nav class="circle-nav">
              <div class="circle" data-label="Home" data-href="{{ '/' | relative_url }}">
                <button class="circle-btn" type="button">Home</button>
                <div class="flyout"></div>
              </div>

              <div class="circle" data-label="Preparing" data-href="{{ '/preparing/' | relative_url }}">
                <button class="circle-btn" type="button">Preparing</button>
                <div class="flyout">
                  <a class="pill" href="https://docs.google.com/spreadsheets/d/1ZjhKX9xpNuL4AG_rvhCvbrSp2nIuF4NTJd0CaRwR53U/edit?usp=sharing" target="_blank" rel="noopener">Pre-Fieldwork Safety Checklist</a>
                </div>
              </div>

              <div class="circle" data-label="Reporting" data-href="{{ '/reporting/' | relative_url }}">
                <button class="circle-btn" type="button">Reporting</button>
                <div class="flyout">
                  <a class="pill" href="{{ '/statelaw.html' | relative_url }}">USA Laws by State</a>
                  <a class="pill" href="{{ '/internationallaw.html' | relative_url }}">International Laws by Country</a>
                  <a class="pill" href="{{ '/titleIX.html' | relative_url }}">Title IX Reporting by University</a>
                  <a class="pill" href="{{ '/fundingethics.html' | relative_url }}">Funding &amp; Professional Associations</a>
                </div>
              </div>

              <div class="circle" data-label="Surveys" data-href="{{ '/surveys/' | relative_url }}">
                <button class="circle-btn" type="button">Surveys</button>
                <div class="flyout">
                  <a class="pill" href="https://forms.gle/YjAmqWd9xDC5WCJk8" target="_blank" rel="noopener">Fieldwork Misconduct Survey</a>
                  <a class="pill" href="https://forms.gle/9DjrMVNP2oUu1GDD8" target="_blank" rel="noopener">Website Feedback Survey</a>
                </div>
              </div>

              <div class="circle" data-label="Contact" data-href="mailto:anthrosafetywarrior@gmail.com">
                <button class="circle-btn" type="button">Contact</button>
                <div class="flyout"></div>
              </div>
            </nav>
          </div>
        </section>
      </div>
    </div>
  </header>

  <main>
    {{ content }}
  </main>

  <!-- Wave + circles + flyout positioning -->
<script>
(() => {
  const wrap  = document.querySelector('.wave-nav');
  const track = wrap?.querySelector('.wave-track');
  const svg   = track?.querySelector('svg.wave');
  const circles = track?.querySelectorAll('.circle') || [];
  if (!wrap || !track || !svg || !circles.length) return;

  const WAVES = 5, AMPFR = 0.20, BASE = 0.52;
  const FILL1 = getComputedStyle(document.documentElement)
                  .getPropertyValue('--band-grad-mid')?.trim() || '#e6ddd7';

  function setHeight(){
    const any = circles[0];
    const size = any ? (any.offsetHeight || parseFloat(getComputedStyle(any).width)) : 96;
    const h = Math.max(120, size * 1.35);
    wrap.style.height = h + 'px';
  }

  /* CSS handles flyout placement; this is a harmless stub */
  function positionFlyout(){ /* no-op */ }

  function draw(){
    const vw = wrap.clientWidth;
    const W  = Math.max(vw, 1280);
    track.style.width = W + 'px';
    svg.style.width   = W + 'px';

    const H = wrap.clientHeight || wrap.getBoundingClientRect().height;
    const A = AMPFR * H;
    const k = (2*Math.PI*WAVES) / W;

    const N = 240;
    let d = `M 0 ${BASE*H + A*Math.sin(0)}`;
    for (let i=1;i<=N;i++){
      const x = (i/N)*W;
      const y = BASE*H + A*Math.sin(k*x);
      d += ` L ${x} ${y}`;
    }
    d += ` L ${W} ${H} L 0 ${H} Z`;
    svg.innerHTML = '';
    const p = document.createElementNS('http://www.w3.org/2000/svg','path');
    p.setAttribute('d', d);
    p.setAttribute('fill', FILL1);
    svg.appendChild(p);

    const pad = Math.max(48, W * 0.03);
    circles.forEach((circleEl, n) => {
      const size = parseFloat(getComputedStyle(circleEl).getPropertyValue('--size')) || circleEl.offsetWidth;
      const theta = Math.PI/2 + 2*Math.PI*n;
      let x = theta / k; x = Math.max(pad, Math.min(W - pad, x));

      const yCurve = BASE*H + A*Math.sin(k*x);
      const inset  = A * 0.35;
      const lift   = size * 0.58;

      circleEl.style.left = (x - size/2) + 'px';
      circleEl.style.top  = Math.max(6, yCurve - inset - size/2 - lift) + 'px';

      const href = circleEl.getAttribute('data-href');
      const btn  = circleEl.querySelector('.circle-btn');
      if (btn && href) btn.onclick = () => { location.href = href; };

      positionFlyout(circleEl); // no-op, keeps API shape
    });
  }

  setHeight();
  draw();
  addEventListener('resize', () => { setHeight(); draw(); }, { passive:true });
})();
</script>
</body>
</html>
