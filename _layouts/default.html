<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
  <script>document.documentElement.classList.replace('no-js','js');</script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ page.title | default: site.title | default: "Golden Trowel Project" }}</title>
  <link rel="canonical" href="{{ page.url | absolute_url }}">

  <style>
    /* =============== Design Tokens (Moss palette) =============== */
/* --- Tokens for band colors --- */
:root{
  --banner:#DED7CC;     /* light taupe strip behind the waves */
  --wave-dark:#8A7C82;  /* darkest wave tone (start of the short band) */
}

/* --- Per-page header photo (tint with page bg, not purple) --- */
.page-hero{
  width:100%;
  height:clamp(220px, 32vw, 380px);
  background:center/cover no-repeat;
  background-image: var(--hero, none);
  position:relative; overflow:hidden;
}
/* Creamy wash (uses page bg) instead of purple */
.page-hero::before{
  content:""; position:absolute; inset:0; pointer-events:none;
  background: color-mix(in srgb, var(--kraft) calc( (var(--hero-tint, .30)) * 100% ), transparent);
}
/* Fade photo → banner (so waves sit on same color) */
.page-hero::after{
  content:""; position:absolute; inset:0; pointer-events:none;
  background: linear-gradient(to bottom,
              color-mix(in srgb, var(--banner) 0%, transparent) 60%,
              color-mix(in srgb, var(--banner) 45%, transparent) 78%,
              var(--banner) 100%);
}

/* --- Wave section is the “banner” strip --- */
.hero-wave{ position:relative; background: var(--banner); }
.hero-wave svg{ display:block; width:100%; height:auto; position:relative; z-index:0; }

/* Short gradient behind buttons: darkest wave → page bg */
.nav-gradient{
  position:relative; z-index:1;
  height:clamp(36px, 6vw, 60px);
  background: linear-gradient(
    to bottom,
    var(--wave-dark) 0%,
    color-mix(in srgb, var(--wave-dark) 50%, var(--kraft) 50%) 60%,
    var(--kraft) 100%
  );
  border-top:1px solid color-mix(in srgb, var(--soil) 10%, transparent);
  border-bottom:1px solid color-mix(in srgb, var(--soil) 10%, transparent);
}

/* --- Buttons now live INSIDE the wave section and sit ON it --- */
.wave-nav{
  position:absolute; left:0; right:0; bottom:0;    /* anchored to the wave section */
  transform: translateY(30%);                      /* lifts into the gradient band */
  z-index:2;                                       /* above wave + gradient */
  pointer-events:none;                             /* only buttons receive events */
}
.wave-links{
  pointer-events:auto;
  display:grid; grid-template-columns:repeat(5,1fr);
  gap:clamp(6px,1.6vw,14px);
  width:min(100%, var(--maxw)); margin:0 auto; padding:0 clamp(12px,2vw,20px);
  list-style:none;
}
.wave-links li{ display:flex; justify-content:center; }
.bubble-link{
  display:flex; align-items:center; justify-content:center;
  width:clamp(68px,10vw,104px); height:clamp(68px,10vw,104px);
  border-radius:999px; text-decoration:none; font-weight:800; color:var(--soil);
  background:var(--offwhite);
  border:3px solid color-mix(in srgb, var(--gold) 70%, transparent);
  box-shadow:0 8px 0 rgba(0,0,0,.10), 0 2px 8px rgba(0,0,0,.08);
  transition: transform .15s ease, background .15s ease, color .15s ease, box-shadow .15s ease, border-color .15s ease;
}
.bubble-link:hover,
.bubble-link[aria-current="page"]{
  background:var(--moss); color:#fff; border-color:var(--gold);
  transform:translateY(-2px);
  box-shadow:0 12px 0 rgba(0,0,0,.12), 0 6px 14px rgba(0,0,0,.12);
}
.bubble-link:focus-visible{ outline:3px solid var(--gold); outline-offset:3px; }

@media (max-width:720px){
  .wave-nav{ transform: translateY(22%); }
}

/* OPTIONAL: put brand (logo + title) on top of the photo */
.brand-over-hero{
  position:absolute; z-index:3; left:clamp(12px,2vw,20px); right:clamp(12px,2vw,20px);
  top: clamp(10px, 2.6vw, 18px);
  mix-blend-mode: normal;
  color: #fff;
  text-shadow: 0 2px 10px rgba(0,0,0,.35);
}
.brand-over-hero h1{ color:#fff; margin:0; }
.brand-over-hero .tagline{ color:#ffefc0; }

    /* =============== Hub (optional accordion blocks used in content) =============== */
    .hub{
      display:grid; gap:1.2rem;
      grid-template-columns: repeat(auto-fit, minmax(240px,1fr));
      align-items:start;
      margin:clamp(12px,2vw,20px) auto;
    }
    .hub-group{
      background: color-mix(in srgb, var(--offwhite) 92%, white);
      border:1px solid color-mix(in srgb, var(--soil) 18%, transparent);
      border-radius:16px; padding:.9rem; box-shadow:0 2px 6px rgba(0,0,0,.05);
    }
    .bubble{
      width:100%; border-radius:999px; padding:.8rem 1rem; font-weight:800;
      background:var(--offwhite); color:var(--soil);
      border:2px solid color-mix(in srgb, var(--soil) 25%, transparent);
      transition:background .18s ease, color .18s ease, transform .18s ease, border-color .18s ease;
      min-height:44px;
    }
    .bubble:hover{ background:var(--logo-orange); color:#fff; transform:translateY(-2px); }
    .bubble:focus-visible{ outline:3px solid var(--accent); outline-offset:3px; }
    .pill-panel{ overflow:hidden; transition:max-height .25s ease; will-change:max-height; }
    @media (prefers-reduced-motion: reduce){ .pill-panel{ transition:none; } }
    .pill-list{ display:flex; flex-wrap:wrap; gap:.5rem; margin-top:.7rem; }
    .pill{
      display:inline-flex; align-items:center; gap:.4rem;
      background:#fff; color:var(--soil);
      border-radius:999px; padding:.48rem .9rem;
      border:1px solid color-mix(in srgb, var(--soil) 20%, transparent);
      font-weight:600; line-height:1; min-height:40px;
      transition:background .15s ease, color .15s ease, border-color .15s ease, transform .15s ease;
    }
    .pill:hover{ background:var(--accent); color:#fff; border-color:transparent; transform:translateY(-1px); }
    .pill:focus-visible{ outline:3px solid var(--accent); outline-offset:3px; }

    /* =============== Main spacing =============== */
    main{ padding-bottom:2rem; }
  </style>
</head>

<body>
  <header class="site-header">
    <div class="container brand">
      <a href="{{ '/' | relative_url }}" aria-label="Golden Trowel Project home">
        <img class="logo" src="{{ '/assets/img/IMG_3241.PNG' | relative_url }}" alt="Golden Trowel Project logo">
      </a>
      <div class="titles">
        <h1>{{ site.title | default: "Golden Trowel Project" }}</h1>
        <div class="tagline">Practical tools. Powerful boundaries. Safer fieldwork.</div>
      </div>
    </div>

    <!-- Per-page header photo (reads `hero:` from front matter) -->
    <div class="page-hero"
         style="--hero: url('{{ page.hero | default: site.default_header | relative_url }}');
                --hero-tint: {{ page.hero_tint | default: 0.30 }}">
    </div>

<!-- Waves + short gradient band + BUTTONS INSIDE -->
<div class="hero-wave" role="presentation" aria-hidden="false">
  <svg viewBox="0 0 1440 160" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M0,64 C160,120 320,8 480,48 C640,88 800,168 960,128 C1120,88 1280,16 1440,64 L1440,160 L0,160 Z" fill="#63374722"></path>
    <path d="M0,100 C160,140 320,40 480,70 C640,100 800,160 960,120 C1120,80 1280,30 1440,70 L1440,160 L0,160 Z" fill="#00000018"></path>
  </svg>

  <!-- short dark→cream band -->
  <div class="nav-gradient"></div>

  <!-- five-circle nav sits ON the band -->
  <nav class="wave-nav" aria-label="Main">
    <ul class="wave-links">
      <li><a class="bubble-link" href="{{ '/' | relative_url }}" aria-current="{% if page.url == '/' %}page{% endif %}">Home</a></li>
      <li><a class="bubble-link" href="{{ '/preparing/'  | relative_url }}" aria-current="{% if page.url contains '/preparing/' %}page{% endif %}">Preparing</a></li>
      <li><a class="bubble-link" href="{{ '/reporting/'  | relative_url }}" aria-current="{% if page.url contains '/reporting/' %}page{% endif %}">Reporting</a></li>
      <li><a class="bubble-link" href="{{ '/surveys/'    | relative_url }}" aria-current="{% if page.url contains '/surveys/' %}page{% endif %}">Surveys</a></li>
      <li><a class="bubble-link" href="{{ '/contact/'    | relative_url }}" aria-current="{% if page.url contains '/contact/' %}page{% endif %}">Contact</a></li>
    </ul>
  </nav>
</div>
  </header>

  <main class="container">
    {{ content }}
  </main>

  <!-- Optional: accordion behavior for .hub blocks -->
  <script>
    (function(){
      const groups = document.querySelectorAll('.hub-group');
      function setPanelState(btn, panel, expanded){
        btn.setAttribute('aria-expanded', expanded);
        if(expanded){
          panel.hidden = false;
          panel.style.maxHeight = panel.scrollHeight + 'px';
          panel.addEventListener('transitionend', () => { panel.style.maxHeight = 'none'; }, { once:true });
        }else{
          panel.style.maxHeight = panel.scrollHeight + 'px';
          requestAnimationFrame(() => { panel.style.maxHeight = '0px'; });
          panel.addEventListener('transitionend', () => { panel.hidden = true; }, { once:true });
        }
      }
      groups.forEach(g => {
        const btn = g.querySelector('.bubble');
        const panel = g.querySelector('.pill-panel');
        if(!btn || !panel) return;
        btn.setAttribute('aria-expanded','false');
        panel.hidden = true;
        panel.style.maxHeight = '0px';
        btn.addEventListener('click', () => {
          const expanded = btn.getAttribute('aria-expanded') === 'true';
          setPanelState(btn, panel, !expanded);
        });
        btn.addEventListener('keydown', (e) => {
          if(e.key === 'ArrowDown'){ e.preventDefault(); setPanelState(btn, panel, true); }
          if(e.key === 'ArrowUp'){   e.preventDefault(); setPanelState(btn, panel, false); }
        });
      });
    })();
  </script>
</body>
</html>
